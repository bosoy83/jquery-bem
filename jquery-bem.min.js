/*!
 * jQuery BEM v0.4.1, https://github.com/hoho/jquery-bem
 * Copyright 2012-2013 Marat Abdullin
 * Released under the MIT license
 */(function(e,t){var n="(?:b-|l-)",r="__",i="_",s="[\\x20\\t\\r\\n\\f]",o="(?:[a-zA-Z0-9-]|[^\\x00-\\xa0])+",u="([*^$|!]?=)",a="\\{"+s+"*("+o+")"+s+"*(?:"+u+s+"*("+o+"))?"+s+"*\\}",f="m",l="c",c="b",h=RegExp,p=new h(s,"g"),d="prototype",v=Array[d].slice,m=e.fn,g="",y=",",b,w=e.expr.match,E=e.expr.filter,S={},x=function(e){return typeof e=="object"},T=function(e,t,n){this._k=e,this._c=e+(t?i+t+(n?i+n:g):g)},N=function(e,t,n,s){this._b=e,this._c=(this._k=e._k+r+t)+(n?i+n+(s?i+s:g):g)},C=function(e,n){return(n=e&&e.className)?x(n)?n.baseVal:n||e.getAttribute!==t&&e.getAttribute("class")||g:g},k=function(e,t,u){return new h("(?:^|"+s+")("+(e||n+o)+")(?:"+r+"("+(t||o)+"))?(?:"+i+"("+(u||o)+")(?:"+i+"("+o+"))?)?(?:"+s+"|$)","g")},L=function(e,t,n,r,i,s){s=this,(r=S[s._k])||(S[s._k]=r=[]);if(x(t))for(i in t)r.push([e+y+i+y+s._c,t[i]]);else r.push([e+y+t+y+s._c,n]);return s},A=function(e,t,n){return n=t.length-1,function r(){if(n>=0){var i=v.call(arguments);return i.unshift(r),t[n--].apply(e,i)}}},O=function(e,t,n,i,s,o,u){return o={},e.replace(p,"  ").replace(k(t,n,i),function(e,i,u,a,f){!t&&!n&&s&&(t=i,n=u),e=i+(u?r+u:g),o[e]||(o[e]={}),a&&(o[e][a]=f||!0)}),t&&(t+=n?r+n:g,o[t]?(u={},u[t]=o[t],o=u):o={}),o},M=function(e,t,n,r){var s={},o,u,a,f,l=[];s[a=e+y+t+y+n]=!0,a+=i;for(o in r)s[u=a+o]=!0,(f=r[o])&&f!==!0&&(s[u+i+f]=!0);r=S[n];if(r)for(o=0;o<r.length;o++)u=r[o],u[0]in s&&l.push(u[1]);return l};E.ELEM=function(e,t){e==="*"&&(e=n+o),t==="*"&&(t=o);var i=new h("(?:^|"+s+"+)"+e+r+t+"(?:"+s+"+|$)");return function(e){return i.test(C(e))}},E.BLOCK=function(e){e==="*"&&(e=n+o);var t=new h("(?:^|"+s+"+)"+e+"(?:"+s+"+|$)");return function(e){return t.test(C(e))}},E.MOD=function(e,t,u){var a=new h("(?:^|"+s+"+)"+n+o+"(?:"+r+o+")?"+i+e+"(?:"+i+"("+o+"))?(?:"+s+"+|$)");return function(e){var n=C(e).match(a),r;return n?(r=n[1]||g,t==="="?r===u:t==="!="?r!==u:t==="^="?u&&r.indexOf(u)===0:t==="*="?u&&r.indexOf(u)>-1:t==="$="?u&&r.substr(r.length-u.length)===u:t==="|="?r===u||r.substr(0,u.length+1)===u+"-":!u):!1}},T[d]=b={onBuild:function(e){return L.call(this,c,c,e)},onMod:function(e,t){return L.call(this,f,e,t)},onCall:function(e,t){return L.call(this,l,e,t)},elem:function(e,t,n){return new N(this,e,t,n)}},N[d]={onMod:b.onMod,onCall:b.onCall,end:function(){return this._b}},e.BEM={decl:function(e,t,n){return new T(e,t,n)},build:function(e){var t=v.call(arguments,1),n,r,i,s,o={};return x(e)?(s=e.context,o.mods=r=e.mods,o.block=e=e.block):o.block=e,t.unshift(o),A(s,M(c,c,e,r||{})).apply(this,t)},setup:function(e){e&&e.prefixes&&(n=e.prefixes),w.BLOCK=new h("^%("+n+o+"|\\*)"),w.ELEM=new h("^%("+n+o+"|\\*)\\("+s+"*("+o+"|\\*)"+s+"*\\)"),w.MOD=new h("^"+a)},className:function(e){if(!e)return g;var t=[],n,r,s,o;if(n=e.block){t.push(n);if(r=e.mods)for(s in r)(o=r[s])&&t.push(n+i+s+(o===!0?g:i+o))}return t.join(" ")}},e.BEM.setup(),m.bemCall=function(e){var n,r,i=v.call(arguments,1),s=this.eq(0),o,u;if(x(e)){if(n=e.block)r=e.elem;e=e.call}if(e){e+=g,o=O(C(s[0]),n,r,t,!0);for(u in o)return A(s,M(l,e,u,o[u])).apply(this,i)}},m.bemMod=function(n,r,s){var o,u,a,l,c=this;if(x(n)){if(o=n.block)u=n.elem;n=n.mod}if(!n){e.error("No modifier");return}if(r===t){a=O(C(c[0]),o,u,n,!0);for(l in a){a=a[l];for(l in a)return a[l];break}return t}return typeof r=="boolean"&&(r=r?!0:g),c.each(function(){var a=O(C(this),o,u),c,h,p,d,v=e(this);for(l in a){p=a[l],d=t;for(h in p)h===n&&(d=p[h]);if(!s&&(!d&&!r||d===r))return;c=M(f,n,l,p),h=l+i+n,d&&v.removeClass(h+(d===!0?g:i+d)),r&&v.addClass(h+(r===!0?g:i+r)),A(v,c)(n,r?r:t,d)}}),c}})($);